<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Class: Correlation parameters — CorrelationParameters • malariasimulation</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Class: Correlation parameters — CorrelationParameters"><meta property="og:description" content="Class: Correlation parameters
Class: Correlation parameters"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">malariasimulation</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Vignettes

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/Model.html">Model Introduction</a>
    </li>
    <li>
      <a href="../articles/Demography.html">Demography</a>
    </li>
    <li>
      <a href="../articles/Treatment.html">Treatment</a>
    </li>
    <li>
      <a href="../articles/MDA.html">MDA and Chemoprevention</a>
    </li>
    <li>
      <a href="../articles/Vaccines.html">Vaccines</a>
    </li>
    <li>
      <a href="../articles/VectorControl_Bednets.html">Vector Control: Bednets</a>
    </li>
    <li>
      <a href="../articles/VectorControl_IRS.html">Vector Control: Indoor Residual Spraying</a>
    </li>
    <li>
      <a href="../articles/SetSpecies.html">Mosquito Species</a>
    </li>
    <li>
      <a href="../articles/Carrying-capacity.html">Carrying Capacity</a>
    </li>
    <li>
      <a href="../articles/EIRprevmatch.html">Matching PfPR2-10 to EIR</a>
    </li>
    <li>
      <a href="../articles/Metapopulation.html">Metapopulation Modelling</a>
    </li>
    <li>
      <a href="../articles/Variation.html">Stochastic Variation</a>
    </li>
    <li>
      <a href="../articles/Parameter_variation.html">Parameter Variation</a>
    </li>
  </ul></li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/mrc-ide/malariasimulation" class="external-link">
    <span class="fa fa-github"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Class: Correlation parameters</h1>

    <div class="hidden name"><code>CorrelationParameters.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Class: Correlation parameters</p>
<p>Class: Correlation parameters</p>
    </div>


    <div id="details">
    <h2>Details</h2>
    <p>This class implements functionality that allows interventions to be
correlated, positively or negatively. By default, interventions are applied
independently and an individual's probability of receiving two interventions
(either two separate interventions or two rounds of the same one) is the
product of the probability of receiving each one.</p>
<p>By setting a positive correlation between two interventions, we can make it
so that the individuals that receive intervention A are more likely to
receive intervention B. Conversely, a negative correlation will make it such
that individuals that receive intervention A are less likely to also receive
intervention B.</p>
<p>Broadly speaking, the implementation works by assigning at startup a weight
to each individual and intervention pair, reflecting how likely an individual
is to receive that intervention. Those weights are derived stochastically
from the configured correlation parameters.</p>
<p>For a detailed breakdown of the calculations, see Protocol S2 of
Griffin et al. (2010).
Derive the mvnorm from the configured correlations.</p>
<p>If a <code>restored_mvnorm</code> is specified, its columns (corresponding to
restored interventions) will be re-used as is. Missing columns (for new
interventions) are derived in accordance with the restored data.</p>
    </div>
    <div id="methods">
    <h2>Methods</h2>

<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-CorrelationParameters-new"><code>CorrelationParameters$new()</code></a></p></li>
<li><p><a href="#method-CorrelationParameters-inter_round_rho"><code>CorrelationParameters$inter_round_rho()</code></a></p></li>
<li><p><a href="#method-CorrelationParameters-inter_intervention_rho"><code>CorrelationParameters$inter_intervention_rho()</code></a></p></li>
<li><p><a href="#method-CorrelationParameters-sigma"><code>CorrelationParameters$sigma()</code></a></p></li>
<li><p><a href="#method-CorrelationParameters-mvnorm"><code>CorrelationParameters$mvnorm()</code></a></p></li>
<li><p><a href="#method-CorrelationParameters-save_state"><code>CorrelationParameters$save_state()</code></a></p></li>
<li><p><a href="#method-CorrelationParameters-restore_state"><code>CorrelationParameters$restore_state()</code></a></p></li>
<li><p><a href="#method-CorrelationParameters-clone"><code>CorrelationParameters$clone()</code></a></p></li>
</ul></div><p></p><hr><a id="method-CorrelationParameters-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>initialise correlation parameters</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va"><a href="../reference/CorrelationParameters.html">CorrelationParameters</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">population</span>, <span class="va">interventions</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>population</code></dt>
<dd><p>popularion size</p></dd>


<dt><code>interventions</code></dt>
<dd><p>character vector with the name of enabled interventions</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-CorrelationParameters-inter_round_rho"></a><div class="section">
<h3 id="method-inter-round-rho-">Method <code>inter_round_rho()</code><a class="anchor" aria-label="anchor" href="#method-inter-round-rho-"></a></h3>
<p>Add rho between rounds</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">CorrelationParameters</span><span class="op">$</span><span class="fu">inter_round_rho</span><span class="op">(</span><span class="va">int</span>, <span class="va">rho</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>int</code></dt>
<dd><p>string representing the intervention to update</p></dd>


<dt><code>rho</code></dt>
<dd><p>value between 0 and 1 representing the correlation between rounds of
the intervention</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-CorrelationParameters-inter_intervention_rho"></a><div class="section">
<h3 id="method-inter-intervention-rho-">Method <code>inter_intervention_rho()</code><a class="anchor" aria-label="anchor" href="#method-inter-intervention-rho-"></a></h3>
<p>Add rho between interventions</p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">CorrelationParameters</span><span class="op">$</span><span class="fu">inter_intervention_rho</span><span class="op">(</span><span class="va">int_1</span>, <span class="va">int_2</span>, <span class="va">rho</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>int_1</code></dt>
<dd><p>string representing the first intervention</p></dd>


<dt><code>int_2</code></dt>
<dd><p>string representing the second intervention (intechangable
with int_1)</p></dd>


<dt><code>rho</code></dt>
<dd><p>value between -1 and 1 representing the correlation between rounds of
the intervention</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-CorrelationParameters-sigma"></a><div class="section">
<h3 id="method-sigma-">Method <code><a href="https://rdrr.io/r/stats/sigma.html" class="external-link">sigma()</a></code><a class="anchor" aria-label="anchor" href="#method-sigma-"></a></h3>
<p>Standard deviation of each intervention between rounds</p><div class="section">
<h4 id="usage-3">Usage<a class="anchor" aria-label="anchor" href="#usage-3"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">CorrelationParameters</span><span class="op">$</span><span class="fu">sigma</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-CorrelationParameters-mvnorm"></a><div class="section">
<h3 id="method-mvnorm-">Method <code>mvnorm()</code><a class="anchor" aria-label="anchor" href="#method-mvnorm-"></a></h3>
<p>multivariate norm draws for these parameters</p><div class="section">
<h4 id="usage-4">Usage<a class="anchor" aria-label="anchor" href="#usage-4"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">CorrelationParameters</span><span class="op">$</span><span class="fu">mvnorm</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-CorrelationParameters-save_state"></a><div class="section">
<h3 id="method-save-state-">Method <code>save_state()</code><a class="anchor" aria-label="anchor" href="#method-save-state-"></a></h3>
<p>Save the correlation state.</p><div class="section">
<h4 id="usage-5">Usage<a class="anchor" aria-label="anchor" href="#usage-5"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">CorrelationParameters</span><span class="op">$</span><span class="fu">save_state</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-CorrelationParameters-restore_state"></a><div class="section">
<h3 id="method-restore-state-">Method <code>restore_state()</code><a class="anchor" aria-label="anchor" href="#method-restore-state-"></a></h3>
<p>Restore the correlation state.</p>
<p>Only the randomly drawn weights are restored. The object needs to be
initialized with the same rhos.</p><div class="section">
<h4 id="usage-6">Usage<a class="anchor" aria-label="anchor" href="#usage-6"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">CorrelationParameters</span><span class="op">$</span><span class="fu">restore_state</span><span class="op">(</span><span class="va">timestep</span>, <span class="va">state</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-3">Arguments<a class="anchor" aria-label="anchor" href="#arguments-3"></a></h4>
<p></p><div class="arguments"><dl><dt><code>timestep</code></dt>
<dd><p>the timestep at which simulation is resumed. This
parameter's value is ignored, it only exists to conform to a uniform
interface.</p></dd>


<dt><code>state</code></dt>
<dd><p>a previously saved correlation state, as returned by the
save_state method.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-CorrelationParameters-clone"></a><div class="section">
<h3 id="method-clone-">Method <code>clone()</code><a class="anchor" aria-label="anchor" href="#method-clone-"></a></h3>
<p>The objects of this class are cloneable with this method.</p><div class="section">
<h4 id="usage-7">Usage<a class="anchor" aria-label="anchor" href="#usage-7"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">CorrelationParameters</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-4">Arguments<a class="anchor" aria-label="anchor" href="#arguments-4"></a></h4>
<p></p><div class="arguments"><dl><dt><code>deep</code></dt>
<dd><p>Whether to make a deep clone.</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Giovanni Charles, Peter Winskill, Hillary Topazian, Joseph Challenger, Richard Fitzjohn, Richard Sheppard, Tom Brewer, Kelly McCain, Lydia Haile.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

